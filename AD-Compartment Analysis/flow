Steps:
To identify the activity-dependent (AD) chromatin compartment, Hi-C interaction matrices were processed through a multi-step pipeline integrating data format conversion, normalization, matrix comparison, and principal component analysis. 
Initially, Hi-C data stored in .hic format were converted to .cool format using the Juicer tool. 
The resulting .cool files were subsequently transformed into .h5 format using the hicConvertFormat function from the HiCExplorer suite to facilitate downstream analyses. 
Each Hi-C contact matrix was normalized to an observed-over-expected (O/E) format using the hicTransform function, enabling the removal of distance-dependent contact decay and allowing for the comparison of relative interaction frequencies. 
Differential interaction maps were generated using the hicCompareMatrices function (HiCExplorer), applying the log2 ratio operation: log⁡2(BIC-/NBQX). 
This operation was performed separately for both genotypes Satb2 flx/flx (flx) and Satb2 cKO (cKO), at 100 kb resolution.
The resulting differential matrices were converted back into .cool format. To ensure matrix balance for principal component analysis, as implemented in the compD Snakemake pipeline (LegubeDNAREPAIR GitHub repository). 
Next, principal component analysis (PCA) was performed on the balanced, differential O/E matrices using a custom Python script (process_pca_compD.py). 
The first principal component (PC1) was extracted for each genotype. Regions with positive PC1 values greater than 0.05 (i.e., PC1 > 0.05) were operationally defined as AD compartments, representing chromatin domains that exhibit increased interaction frequency in response to neuronal stimulation (BIC treatment) relative to suppression (NBQX treatment). 
For visualization, AD compartments were exported as signal tracks in bigWig format using the UCSC bigWig conversion utilities, enabling integration with genome browsers and other downstream visualization tools.
